(this.webpackJsonpwhats_to_eat_react=this.webpackJsonpwhats_to_eat_react||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(10),c=n.n(i),r=n(13),o=n(14),l=n(15),u=n(19),d=n(18),h=(n(70),n(16)),b=(n(71),n.p+"static/media/my_logo.a73b85aa.jpg"),j=n(7),m=n(62),g=n.n(m),p=n(81),v=n(82),O="https://whatstoeat-backend.herokuapp.com/",f=n.n(v).a.create({baseURL:O,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}});f.interceptors.response.use((function(e){return e}),function(){var e=Object(p.a)(g.a.mark((function e(t){var n,a,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||n.url!==O+"/api/token/refresh/"){e.next=7;break}return window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=21;break}if(s=JSON.parse(atob(a.split(".")[1])),i=Math.ceil(Date.now()/1e3),console.log(s.exp),!(s.exp>i)){e.next=17;break}return e.abrupt("return",f.post("api/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),f.defaults.headers.Authorization="JWT "+e.data.access,n.headers.Authorization="JWT "+e.data.access,console.log("front user ",e.data.id),f(n)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",s.exp,i),window.location.href="/login/";case 19:e.next=23;break;case 21:console.log("Refresh token not available."),window.location.href="/login/";case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var x,C,y=f,k=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getAll",value:function(){return y.get("/restaurants")}},{key:"get",value:function(e){return y.get("/restaurants/".concat(e))}},{key:"create",value:function(e){return y.post("/restaurants",e)}},{key:"update",value:function(e,t){return y.put("/restaurants/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/restaurants/".concat(e))}},{key:"findByCity",value:function(e){return y.get("/restaurants?city=".concat(e))}},{key:"getAllCities",value:function(){return y.get("/restaurants/city")}},{key:"createCuisine",value:function(e){return y.post("/api/cuisine/",e)}},{key:"getAllCuisines",value:function(){return y.get("/api/cuisine/")}},{key:"getCuisine",value:function(e){return y.get("api/cuisine/".concat(e))}},{key:"getRestaurants",value:function(e){return y.get("/cuisines/".concat(e))}}]),e}()),N=(n(60),n(1)),S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({selectedOption:e.target.value},(function(){return console.log("Option selected: ",e)}))},a.onChangeSearchCity=a.onChangeSearchCity.bind(Object(j.a)(a)),a.retrieveRestaurants=a.retrieveRestaurants.bind(Object(j.a)(a)),a.refreshList=a.refreshList.bind(Object(j.a)(a)),a.setActiveRestaurant=a.setActiveRestaurant.bind(Object(j.a)(a)),a.searchCity=a.searchCity.bind(Object(j.a)(a)),a.retrieveCities=a.retrieveCities.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.state={user:localStorage.getItem("id"),restaurants:[],currentRestaurant:null,currentIndex:-1,searchCity:"",cities:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.retrieveRestaurants(),this.retrieveCities()}},{key:"onChangeSearchCity",value:function(e){var t=e.target.value;this.setState({searchCity:t})}},{key:"retrieveRestaurants",value:function(){var e=this;console.log("*&*&*&*&* ",this.state.user),k.getAll().then((function(t){e.setState({restaurants:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"refreshList",value:function(){this.retrieveRestaurants(),this.setState({currentRestaurant:null,currentIndex:-1})}},{key:"setActiveRestaurant",value:function(e,t){this.setState({currentRestaurant:e,currentIndex:t}),console.log("res current index ",this.state.currentIndex)}},{key:"searchCity",value:function(e){var t=this;k.findByCity(this.state.selectedOption).then((function(e){t.setState({restaurants:e.data,currentRestaurant:null}),console.log("search city",e.data)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"retrieveCities",value:function(){var e=this;k.getAllCities().then((function(t){e.setState({cities:t.data,selectedOption:t.data[0].city})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.restaurants,a=t.currentRestaurant,s=t.currentIndex;return Object(N.jsx)("div",{className:"bg",children:Object(N.jsxs)("div",{className:"card",children:[Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)("h5",{children:"Restaurants by City"}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("form",{onSubmit:this.searchCity,children:[Object(N.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.selectedOption,onChange:this.handleChange,children:this.state.cities.map((function(e,t){return Object(N.jsx)("option",{value:e.city,children:e.city},t)}))}),Object(N.jsx)("button",{className:"submitBtn",type:"submit",value:"Submit",children:"Submit"})]})})]}),Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)("h4",{children:"Restaurant List"}),Object(N.jsx)("ul",{className:"list-group",children:n&&n.map((function(t,n){return Object(N.jsx)("li",{className:"list-group-item "+(n===s?"active":""),onClick:function(){return e.setActiveRestaurant(t,n)},children:t.name},n)}))})]}),Object(N.jsx)("div",{className:"col=md-6",children:a?Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"Restaurant"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Name:"})})," ",a.name]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Website:"})})," ",Object(N.jsx)("a",{target:"_blank",href:a.website,children:a.website})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Address:"})})," ",a.address]}),Object(N.jsxs)("ul",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Cuisines:"})}),a.cuisine.map((function(e){return Object(N.jsx)("li",{children:e.type},e.id)}))]}),Object(N.jsx)(r.b,{to:"/restaurants/"+a.id,className:"btn btn-outline-primary btn-sm",children:"Edit"})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:"Please click on a Restaurant..."})]})})]})})}}]),n}(a.Component),R=n(20),w=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(j.a)(a)),a.onChangeWebsite=a.onChangeWebsite.bind(Object(j.a)(a)),a.onChangeAddress=a.onChangeAddress.bind(Object(j.a)(a)),a.onChangeCity=a.onChangeCity.bind(Object(j.a)(a)),a.getRestaurant=a.getRestaurant.bind(Object(j.a)(a)),a.updateRestaurant=a.updateRestaurant.bind(Object(j.a)(a)),a.deleteRestaurant=a.deleteRestaurant.bind(Object(j.a)(a)),a.retrieveCuisines=a.retrieveCuisines.bind(Object(j.a)(a)),a.setCuisine=a.setCuisine.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.state={currentRestaurant:{id:null,name:"",website:"",address:"",city:"",cuisine:""},cuisines:[],message:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getRestaurant(this.props.match.params.id),this.retrieveCuisines()}},{key:"onChangeName",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(R.a)(Object(R.a)({},e.currentRestaurant),{},{name:t})}}))}},{key:"onChangeWebsite",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(R.a)(Object(R.a)({},e.currentRestaurant),{},{website:t})}}))}},{key:"onChangeAddress",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(R.a)(Object(R.a)({},e.currentRestaurant),{},{address:t})}}))}},{key:"onChangeCity",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(R.a)(Object(R.a)({},e.currentRestaurant),{},{city:t})}}))}},{key:"getRestaurant",value:function(e){var t=this;k.get(e).then((function(e){t.setState({currentRestaurant:e.data}),console.log("get restaurant ",e.data),console.log(t.state.currentRestaurant),console.log(t.state.currentRestaurant.cuisine)})).catch((function(e){console.log(e)}))}},{key:"updateRestaurant",value:function(){var e=this;k.update(this.state.currentRestaurant.id,this.state.currentRestaurant).then((function(t){console.log(t.data),e.setState({message:"The restaurant was update successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteRestaurant",value:function(){var e=this;k.delete(this.state.currentRestaurant.id).then((function(t){console.log(t.data),e.props.history.push("/restaurants")})).catch((function(e){console.log(e)}))}},{key:"retrieveCuisines",value:function(){var e=this;k.getAllCuisines().then((function(t){e.setState({cuisines:t.data}),console.log("retrieve cuisines ",t.data)})).catch((function(e){console.log(e)}))}},{key:"setCuisine",value:function(e,t){console.log("set cuisine ",e),this.setState({cuisine:e,currentIndex:t})}},{key:"handleChange",value:function(e){var t={id:this.state.currentRestaurant.id,name:this.state.currentRestaurant.name,website:this.state.currentRestaurant.website,address:this.state.currentRestaurant.address,city:this.state.currentRestaurant.city,cuisine:e.target.value};console.log("event target ",e.target.value),this.setState({currentRestaurant:t}),e.preventDefault()}},{key:"render",value:function(){var e=this.state.currentRestaurant;return Object(N.jsx)("div",{children:e?Object(N.jsxs)("div",{className:"edit-form",children:[Object(N.jsx)("h4",{children:"Restaurant"}),Object(N.jsxs)("form",{children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"name",children:"Name"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"name",value:e.name,onChange:this.onChangeName})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"website",children:"Website"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"website",value:e.website,onChange:this.onChangeWebsite,name:"website"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"address",children:"Address"}),Object(N.jsx)("input",{type:"address",className:"form-control",id:"address",value:e.address,onChange:this.onChangeAddress})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"city",children:"City"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"city",value:e.city,onChange:this.onChangeCity,name:"city"})]})]}),Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("label",{htmlFor:"city",children:"Add Cuisine"}),Object(N.jsx)("form",{children:Object(N.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.cuisine,onChange:this.handleChange,children:this.state.cuisines.map((function(e){return Object(N.jsx)("option",{value:e.id,children:e.type},e.id)}))})})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-outline-dark btn-sm",onClick:this.updateRestaurant,children:"Update"}),Object(N.jsx)("button",{type:"submit",className:"btn btn-outline-dark btn-sm",onClick:this.deleteRestaurant,children:"Delete"}),Object(N.jsx)("p",{children:this.state.message})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:"Click on a Restaurant"})]})})}}]),n}(a.Component),_=n(42),A=n(94),I=n(43),T=I.a.div(x||(x=Object(_.a)(["\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    padding: 20px;\n    text-align:center;\n"]))),M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onPlaceChanged=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props,t=e.map,n=e.addplace,s=a.autoComplete.getPlace();console.log("place ",s),console.log("contact ",s.website),s.geometry&&(s.geometry.viewport?t.fitBounds(s.geometry.viewport):(t.setCenter(s.geometry.location),t.setZoom(17)),n(s),a.searchInput.blur())},a.clearSearchBox=a.clearSearchBox.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.map,n=e.mapApi,a={fields:["name","url","website","address_components","geometry"],types:["establishment"]};this.autoComplete=new n.places.Autocomplete(this.searchInput,a),this.autoComplete.addListener("place_changed",this.onPlaceChanged),this.autoComplete.bindTo("bounds",t)}},{key:"componentWillUnmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.mapApi;t.event.clearInstanceListeners(this.searchInput)}},{key:"clearSearchBox",value:function(){this.searchInput.value=""}},{key:"render",value:function(){var e=this;return Object(N.jsx)(T,{children:Object(N.jsx)("input",{className:"search-input",ref:function(t){e.searchInput=t},type:"text",onFocus:this.clearSearchBox,placeholder:"Enter a location"})})}}]),n}(a.Component),W=I.a.div(C||(C=Object(_.a)(["\n    position: absolute;\n    width: 38px;\n    height: 37px;\n    background-image: url(https://icon-library.com/images/pin-icon-png/pin-icon-png-9.jpg);\n    background-size: contain;\n    background-repeat: no-repeat;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    cursor: grab;\n"]))),L=function(e){var t=e.text,n=e.onClick;return Object(N.jsx)(W,{alt:t,onClick:n})};L.defaultProps={onClick:null};var D,B=L,z=n(180),P=I.a.main(D||(D=Object(_.a)(["\n    width: 100%;\n    height: 100%;\n"]))),U=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={mapApiLoaded:!1,mapInstance:null,mapApi:null,geoCoder:null,user:localStorage.getItem("id"),places:[],restaurant_name:"",website:"",center:[],zoom:9,address:"",city:"",state:"",draggable:!0,lat:null,lng:null,submitted:!1},a.onMarkerInteraction=function(e,t,n){a.setState({draggable:!1,lat:n.lat,lng:n.lng})},a.onMarkerInteractionMouseUp=function(e,t,n){a.setState({draggable:!0}),a._generateAddress()},a._onChange=function(e){var t=e.center,n=e.zoom;a.setState({center:t,zoom:n})},a._onClick=function(e){a.setState({lat:e.lat,lng:e.lng})},a.apiHasLoaded=function(e,t){a.setState({mapApiLoaded:!0,mapInstance:e,mapApi:t}),a._generateAddress()},a.addPlace=function(e){console.log("addPlace ",e),a.setState({places:[e],restaurant_name:e.name,website:e.website,lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}),a._generateAddress()},a.getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var n=0;n<e[t].types.length;n++)if("sublocality_level_1"===e[t].types[n]||"locality"===e[t].types[n])return e[t].long_name},a.getState=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)if(e[n].types[0]&&"administrative_area_level_1"===e[n].types[0])return e[n].long_name},a.saveRestaurant=a.saveRestaurant.bind(Object(j.a)(a)),a.newRestaurant=a.newRestaurant.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){this.setState({center:[47.608013,-122.335167],lat:47.608013,lng:-122.335167})}},{key:"saveRestaurant",value:function(){var e=this,t={user:this.state.user,name:this.state.restaurant_name,website:this.state.website,address:this.state.address,city:this.state.city};console.log("potato ",t),k.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,website:t.data.website,address:t.data.address,city:t.data.city,user:e.state.user,submitted:!0}),console.log("saveRestaurant ",e.state.submitted),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newRestaurant",value:function(){this.setState({id:null,user:this.state.user,name:"",website:"",address:"",city:"",submitted:!1}),console.log("newRestaurant ",this.submitted)}},{key:"_generateAddress",value:function(){var e=this;(new this.state.mapApi.Geocoder).geocode({location:{lat:this.state.lat,lng:this.state.lng}},(function(t,n){if(console.log(t),console.log(n),"OK"===n)if(t[0]){e.zoom=12;var a=t[0].address_components,s=e.getCity(a),i=e.getState(a);e.setState({address:t[0].formatted_address,city:s,state:i})}else window.alert("No results found");else window.alert("Geocoder failed due to: "+n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.places,t.mapApiLoaded),a=t.mapInstance,s=t.mapApi;return Object(N.jsxs)(P,{children:[n&&Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{className:"text-center",children:"Restaurant Search"}),Object(N.jsx)(M,{className:"auto-complete",map:a,mapApi:s,addplace:this.addPlace})]}),Object(N.jsx)(A.a,{center:this.state.center,zoom:this.state.zoom,draggable:this.state.draggable,onChange:this._onChange,onChildMouseDown:this.onMarkerInteraction,onChildMouseUp:this.onMarkerInteractionMouseUp,onChildMouseMove:this.onMarkerInteraction,onChildClick:function(){return console.log("child click")},onClick:this._onClick,bootstrapURLKeys:{key:"".concat("AIzaSyBaOc-kpmUetfkxEQc60qXzA_p4FZvOmUY"),libraries:["places","geometry"]},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var n=t.map,a=t.maps;return e.apiHasLoaded(n,a)},children:Object(N.jsx)(B,{text:this.state.address,lat:this.state.lat,lng:this.state.lng})}),Object(N.jsx)("div",{className:"descriptions",children:Object(N.jsxs)(z.b,{bordered:!0,children:[Object(N.jsx)(z.b.Item,{label:"Restaurant",children:this.state.restaurant_name}),Object(N.jsx)("br",{}),Object(N.jsx)(z.b.Item,{label:"Address",children:this.state.address})]})}),Object(N.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"You submitted successfully!"}),Object(N.jsx)("button",{className:"btn btn-success",onClick:this.newRestaurant,children:"Add"})]}):Object(N.jsx)("div",{children:Object(N.jsx)("button",{onClick:this.saveRestaurant,className:"btn btn-success",children:"Submit"})})})]})}}]),n}(a.Component),F=n(174),J=n(175),q=n(141),E=n(172),G=n(170),Y=n(176),H=Object(G.a)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1}}}));var K=function(){var e=H();return Object(N.jsxs)(s.a.Fragment,{children:[Object(N.jsx)(E.a,{}),Object(N.jsx)(F.a,{position:"static",color:"default",elevation:0,className:e.appBar,children:Object(N.jsx)(J.a,{className:e.toolbar,children:Object(N.jsx)(q.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle,children:Object(N.jsx)(Y.a,{component:r.c,to:"/",underline:"none",color:"textPrimary",className:"nav-link h5 link-secondary",children:Object(N.jsx)("img",{src:b,alt:"Logo"})})})})})]})},V=n(34),Z=n(177);n(181),Object(G.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},footer:Object(V.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));var Q=n(56),X=n(183),$=n(182),ee=n(179),te=n(178),ne=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ae(){var e=Object(h.f)(),t=Object.freeze({email:"",user_name:"",password:""}),n=Object(a.useState)(t),s=Object(Q.a)(n,2),i=s[0],c=s[1],o=function(e){c(Object(R.a)(Object(R.a)({},i),{},Object(V.a)({},e.target.name,e.target.value.trim())))},l=ne();return Object(N.jsxs)(Z.a,{component:"main",maxWidth:"xs",children:[Object(N.jsx)(E.a,{}),Object(N.jsxs)("div",{className:l.paper,children:[Object(N.jsx)(X.a,{className:l.avatar}),Object(N.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(N.jsxs)("form",{className:l.form,noValidate:!0,children:[Object(N.jsxs)(te.a,{container:!0,spacing:2,children:[Object(N.jsx)(te.a,{item:!0,xs:12,children:Object(N.jsx)(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:o})}),Object(N.jsx)(te.a,{item:!0,xs:12,children:Object(N.jsx)(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"user_name",label:"Username",name:"user_name",autoComplete:"user_name",onChange:o})}),Object(N.jsx)(te.a,{item:!0,xs:12,children:Object(N.jsx)(ee.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:o})})]}),Object(N.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,onClick:function(t){t.preventDefault(),console.log(i),y.post("/api/user/register/",{email:i.email,user_name:i.user_name,password:i.password}).then((function(t){e.push("/login"),console.log(t),console.log(t.data)}))},children:"Sign Up"}),Object(N.jsx)(te.a,{container:!0,justify:"flex-end",children:Object(N.jsx)(te.a,{item:!0,children:Object(N.jsx)(r.b,{href:"#",variant:"body2",to:"/login",children:"Already have an account? Sign in"})})})]})]})]})}var se=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ie(){var e=Object(h.f)(),t=Object.freeze({user_name:"",password:""}),n=Object(a.useState)(t),s=Object(Q.a)(n,2),i=s[0],c=s[1],o=function(e){c(Object(R.a)(Object(R.a)({},i),{},Object(V.a)({},e.target.name,e.target.value.trim())))},l=se();return Object(N.jsx)(Z.a,{children:Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)("div",{className:"card-login",children:[Object(N.jsx)(X.a,{className:l.avatar}),Object(N.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(N.jsxs)("form",{className:l.form,noValidate:!0,children:[Object(N.jsx)(ee.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"user_name",label:"User Name",name:"user_name",autoComplete:"user_name",autoFocus:!0,onChange:o}),Object(N.jsx)(ee.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:o}),Object(N.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,onClick:function(t){t.preventDefault(),y.post("/api/token/",{user_name:i.user_name,password:i.password}).then((function(t){localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),localStorage.setItem("id",t.data.id),localStorage.setItem("user_name",t.data.user_name),localStorage.setItem("user",JSON.stringify(t.data)),y.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),e.push("/"),console.log(t.data)}))},children:"Sign In"}),Object(N.jsxs)(te.a,{container:!0,children:[Object(N.jsx)(te.a,{item:!0,xs:!0,children:Object(N.jsx)(r.b,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(N.jsx)(te.a,{item:!0,children:Object(N.jsx)(r.b,{href:"#",variant:"body2",to:"/register",children:"Don't have an account? Sign Up"})})]})]})]})})})}function ce(){var e=Object(h.f)();return Object(a.useEffect)((function(){y.post("/api/user/logout/blacklist/",{refresh_token:localStorage.getItem("refresh_token")}),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("id"),localStorage.removeItem("user_name"),localStorage.removeItem("user"),y.defaults.headers.Authorization=null,e.push("/login")})),Object(N.jsx)("div",{children:"Logout"})}Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var re=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({selectedOption:e.target.value},(function(){return console.log("Option selected: ",e)}))},a.onChangeSearchCity=a.onChangeSearchCity.bind(Object(j.a)(a)),a.retrieveRestaurants=a.retrieveRestaurants.bind(Object(j.a)(a)),a.searchCity=a.searchCity.bind(Object(j.a)(a)),a.retrieveCities=a.retrieveCities.bind(Object(j.a)(a)),a.retrieveCuisines=a.retrieveCuisines.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.state={user:localStorage.getItem("id"),restaurants:[],currentRestaurant:null,currentIndex:-1,searchCity:"",cities:[],random_restaurant:"",cuisines:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.retrieveCities(),this.retrieveCuisines()}},{key:"onChangeSearchCity",value:function(e){var t=e.target.value;this.setState({searchCity:t})}},{key:"retrieveRestaurants",value:function(){var e=this;console.log("*&*&*&*&* ",this.state.user),k.getAll().then((function(t){e.setState({restaurants:t.data,random_restaurant:t.data[Math.floor(Math.random()*t.data.length)]}),console.log(t.data),console.log("random restaurant ",t.data[Math.floor(Math.random()*t.data.length)])})).catch((function(e){console.log(e)}))}},{key:"searchCity",value:function(e){var t=this;k.findByCity(this.state.selectedOption).then((function(e){t.setState({restaurants:e.data,currentRestaurant:null,random_restaurant:e.data[Math.floor(Math.random()*e.data.length)]}),console.log("search city",e.data)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"retrieveCities",value:function(){var e=this;k.getAllCities().then((function(t){e.setState({cities:t.data,selectedOption:t.data[0].city})})).catch((function(e){console.log(e)}))}},{key:"retrieveCuisines",value:function(){var e=this;k.getAllCuisines().then((function(t){e.setState({cuisines:t.data}),console.log("cuisines ",t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)("div",{className:"hm-card",children:[Object(N.jsx)("h1",{className:"heading",children:Object(N.jsx)("a",{target:"_blank",href:this.state.random_restaurant.website,children:this.state.random_restaurant.name})}),Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.retrieveRestaurants,children:"Surprise Me"}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("h5",{children:"Surprise by Location"}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("form",{onSubmit:this.searchCity,children:[Object(N.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.selectedOption,onChange:this.handleChange,children:this.state.cities.map((function(e,t){return Object(N.jsx)("option",{value:e.city,children:e.city},t)}))}),Object(N.jsx)("button",{className:"submitBtn",type:"submit",value:"Submit",children:"Submit"})]})})]})]})})}}]),n}(a.Component),oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeType=a.onChangeType.bind(Object(j.a)(a)),a.saveCuisine=a.saveCuisine.bind(Object(j.a)(a)),a.newCuisine=a.newCuisine.bind(Object(j.a)(a)),a.retrieveCuisines=a.retrieveCuisines.bind(Object(j.a)(a)),a.setActiveCuisine=a.setActiveCuisine.bind(Object(j.a)(a)),a.state={cuisines:[],id:null,type:"",currentCuisine:null,currentIndex:-1,submitted:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.retrieveCuisines()}},{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"retrieveCuisines",value:function(){var e=this;k.getAllCuisines().then((function(t){e.setState({cuisines:t.data}),console.log("retrieveCuisines ",t.data),console.log(e.state.cuisines)})).catch((function(e){console.log(e)}))}},{key:"setActiveCuisine",value:function(e,t){this.setState({currentCuisine:e,currentIndex:t}),console.log("*** ",this.state.currentCuisine)}},{key:"saveCuisine",value:function(){var e=this,t={type:this.state.type};k.createCuisine(t).then((function(t){e.setState({id:t.data.id,type:t.data.type,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newCuisine",value:function(){this.setState({id:null,type:"",submitted:!1}),console.log("new submitted ",this.state.submitted)}},{key:"render",value:function(){var e=this,t=this.state,n=t.cuisines,a=t.currentCuisine,s=t.currentIndex;return Object(N.jsxs)("div",{className:"submit-form",children:[Object(N.jsx)("h5",{children:"Add Cuisine Type"}),this.state.submitted?Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"You submitted successfully!"}),Object(N.jsx)("button",{className:"btn btn-success",onClick:this.newCuisine,children:"Add"})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("input",{type:"text",className:"form-control",id:"type",required:!0,value:this.state.type,onChange:this.onChangeType,name:"type"})}),Object(N.jsx)("button",{onClick:this.saveCuisine,className:"btn btn-success",children:"Submit"})]}),Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)("h4",{children:"Cuisine List"}),Object(N.jsx)("ul",{className:"list-group",children:this.state.cuisines&&n.map((function(t,n){return Object(N.jsx)("li",{className:"list-group-item "+(n===s?"active":""),onClick:function(){return e.setActiveCuisine(t,n)},children:t.type},n)}))})]}),Object(N.jsx)("div",{className:"col-md-6",children:a?Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"Cuisine"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Type:"})})," ",a.type,Object(N.jsx)(r.b,{to:"api/cuisine/"+a.id,className:"btn btn-outline-primary btn-sm",children:"Edit"})]})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:"Please click on a Category..."})]})})]})}}]),n}(a.Component),le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({selectedOption:e.target.value},(function(){return console.log("Option selected: ",e.target.value)}))},a.onChangeSearchCuisine=a.onChangeSearchCuisine.bind(Object(j.a)(a)),a.retrieveCuisines=a.retrieveCuisines.bind(Object(j.a)(a)),a.searchCuisine=a.searchCuisine.bind(Object(j.a)(a)),a.setActiveRestaurant=a.setActiveRestaurant.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.state={cuisines:[],currentRestaurant:null,currentResIndex:-1,searchCuisine:"",restaurants:[],selectedOption:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.retrieveCuisines()}},{key:"onChangeSearchCuisine",value:function(e){var t=e.target.value;this.setState({searchCuisine:t})}},{key:"retrieveCuisines",value:function(){var e=this;k.getAllCuisines().then((function(t){e.setState({cuisines:t.data}),console.log("retrieveCuisines ",t.data),console.log(e.state.cuisines)})).catch((function(e){console.log(e)}))}},{key:"setActiveRestaurant",value:function(e,t){this.setState({currentRestaurant:e,currentResIndex:t})}},{key:"searchCuisine",value:function(e){var t=this;console.log("***** ",this.state.selectedOption),this.state.selectedOption=parseInt(this.state.selectedOption)+1,k.getRestaurants(this.state.selectedOption).then((function(e){t.setState({restaurants:e.data}),console.log("cuisine restaurant data ",e.data)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"getCuisineRestaurants",value:function(e){var t=this;k.getRestaurants(e).then((function(e){t.setState({restaurants:e.data}),console.log("cuisine restaurant data ",e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.cuisines,a=t.restaurants,s=t.currentRestaurant,i=t.currentResIndex;return Object(N.jsx)("div",{className:"bg",children:Object(N.jsxs)("div",{className:"card",children:[Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)("h5",{children:"Restaurants by Cuisine"}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("form",{onSubmit:this.searchCuisine,children:[Object(N.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.selectedOption,onChange:this.handleChange,children:n.map((function(e,t){return Object(N.jsx)("option",{value:t,children:e.type},t)}))}),Object(N.jsx)("button",{className:"submitBtn",type:"submit",value:"Submit",children:"Submit"})]})})]}),Object(N.jsxs)("div",{className:"col-md-8",children:[Object(N.jsx)("h4",{children:"Restaurant List"}),Object(N.jsx)("ul",{className:"list-group",children:this.state.restaurants&&a.map((function(t,n){return Object(N.jsx)("li",{className:"list-group-item "+(n===i?"active":""),onClick:function(){return e.setActiveRestaurant(t,n)},children:t.name},n)}))})]}),Object(N.jsx)("div",{className:"col-md-6",children:s?Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"Restaurant"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Name:"})})," ",s.name]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Website:"})})," ",Object(N.jsx)("a",{target:"_blank",href:s.website,children:s.website})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Address:"})})," ",s.address]})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:"Please click on a Category..."})]})})]})})}}]),n}(a.Component),ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeType=a.onChangeType.bind(Object(j.a)(a)),a.getCuisine=a.getCuisine.bind(Object(j.a)(a)),a.retrieveCuisines=a.retrieveCuisines.bind(Object(j.a)(a)),a.setCuisine=a.setCuisine.bind(Object(j.a)(a)),a.getCuisineRestaurants=a.getCuisineRestaurants.bind(Object(j.a)(a)),a.state={currentCuisine:{id:null,type:""},restaurants:[],message:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getCuisine(this.props.match.params.id),this.retrieveCuisines()}},{key:"onChangeType",value:function(e){var t=e.target.value;this.setState((function(e){return{currentCuisine:Object(R.a)(Object(R.a)({},e.currentCuisine),{},{type:t})}}))}},{key:"getCuisine",value:function(e){var t=this;k.getCuisine(e).then((function(e){t.setState({currentCuisine:e.data}),console.log(t.state.restaurants)})).catch((function(e){console.log(e)})),this.getCuisineRestaurants(e)}},{key:"getCuisineRestaurants",value:function(e){var t=this;k.getRestaurants(e).then((function(e){t.setState({restaurants:e.data}),console.log("get restaurant ",e.data),console.log(t.state.restaurants)})).catch((function(e){console.log(e)}))}},{key:"retrieveCuisines",value:function(){var e=this;k.getAllCuisines().then((function(t){e.setState({cuisines:t.data}),console.log("retrieve cuisines ",t.data)})).catch((function(e){console.log(e)}))}},{key:"setCuisine",value:function(e,t){console.log("set cuisine ",e),this.setState({cuisine:e,currentIndex:t})}},{key:"render",value:function(){var e=this.state.currentCuisine;return Object(N.jsx)("div",{children:e?Object(N.jsxs)("div",{className:"edit-form",children:[Object(N.jsx)("h4",{children:"Cuisine"}),Object(N.jsx)("form",{children:Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"name",children:"Type"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"name",value:e.type,onChange:this.onChangeType})]})}),Object(N.jsxs)("ul",{children:[Object(N.jsx)("label",{children:Object(N.jsx)("strong",{children:"Cuisines:"})}),this.state.restaurants.map((function(e){return Object(N.jsx)("li",{children:e.name},e.id)}))]}),Object(N.jsx)("p",{children:this.state.message})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsx)("p",{children:"Click on a Restaurant"})]})})}}]),n}(a.Component);n.p;var de=function(e){return Object(h.g)(),localStorage.getItem("access_token")?Object(N.jsx)("div",{className:"navigation",children:Object(N.jsx)("nav",{id:"topnav",className:"navbar navbar-expand navbar-light",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(N.jsx)("li",{class:"nav-item ".concat("/login"===window.location.pathname?"active":""),children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/logout",children:"Logout"})})})})})}):Object(N.jsx)("div",{className:"navigation",children:Object(N.jsx)("nav",{id:"topnav",className:"navbar navbar-expand navbar-light",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsx)("div",{children:Object(N.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(N.jsx)("li",{className:"nav-item ".concat("/login"===window.location.pathname?"active":""),children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/login",children:"Login"})}),Object(N.jsx)("li",{class:"nav-item ".concat("/register"===window.location.pathname?"active":""),children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/register",children:"Register"})})]})})})})})},he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(K,{}),Object(N.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(N.jsxs)("ul",{className:"nav flex-row",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/restaurants",children:Object(N.jsx)("span",{className:"ml-2",children:"Restaurants"})})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/add",children:Object(N.jsx)("span",{className:"ml-2",children:"Add Restaurant"})})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/cuisine",children:Object(N.jsx)("span",{className:"ml-auto",children:"Cuisines"})})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(r.c,{className:"nav-link h5 link-secondary",to:"/addcuisine",children:Object(N.jsx)("span",{className:"ml-auto",children:"Add Cuisines"})})})]}),Object(N.jsx)(de,{})]}),Object(N.jsx)("div",{children:Object(N.jsxs)(h.c,{children:[Object(N.jsx)(h.a,{path:"/register",component:ae}),Object(N.jsx)(h.a,{path:"/login/",component:ie}),Object(N.jsx)(h.a,{path:"/logout",component:ce}),Object(N.jsx)(h.a,{exact:!0,path:"/",component:re}),Object(N.jsx)(h.a,{exact:!0,path:"/restaurants",component:S}),Object(N.jsx)(h.a,{path:"/restaurants/:id",component:w}),Object(N.jsx)(h.a,{path:"/cuisine",component:le}),Object(N.jsx)(h.a,{path:"/cuisines/:id",component:ue}),Object(N.jsx)(h.a,{path:"/addcuisine",component:oe}),Object(N.jsx)("div",{className:"main-wrapper",children:Object(N.jsx)(h.a,{exact:!0,path:"/add",component:U})})]})})]})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(137);c.a.render(Object(N.jsx)(r.a,{children:Object(N.jsx)(he,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){},70:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.09118aff.chunk.js.map