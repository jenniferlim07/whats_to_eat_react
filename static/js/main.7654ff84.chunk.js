(this.webpackJsonpwhats_to_eat_react=this.webpackJsonpwhats_to_eat_react||[]).push([[0],{151:function(e,t,a){},162:function(e,t,a){},271:function(e,t,a){},479:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),c=a.n(r),i=a(17),o=a(13),l=a(14),u=a(19),d=a(18),h=(a(151),a(15)),b=(a(253),a.p+"static/media/indulge-restaurant.638567c1.jpg"),j=a(7),m=a(102),p=a.n(m),g=a(218),v=a(219),f="https://whatstoeat-backend.herokuapp.com/",O=a.n(v).a.create({baseURL:f,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}});O.interceptors.response.use((function(e){return e}),function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||a.url!==f+"/api/token/refresh/"){e.next=7;break}return window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(n=localStorage.getItem("refresh_token"))){e.next=21;break}if(s=JSON.parse(atob(n.split(".")[1])),r=Math.ceil(Date.now()/1e3),console.log(s.exp),!(s.exp>r)){e.next=17;break}return e.abrupt("return",O.post("api/token/refresh/",{refresh:n}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),O.defaults.headers.Authorization="JWT "+e.data.access,a.headers.Authorization="JWT "+e.data.access,console.log("front user ",e.data.id),O(a)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",s.exp,r),window.location.href="/login/";case 19:e.next=23;break;case 21:console.log("Refresh token not available."),window.location.href="/login/";case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var x,y,C=O,k=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getAll",value:function(){return C.get("/restaurants")}},{key:"get",value:function(e){return C.get("/restaurants/".concat(e))}},{key:"create",value:function(e){return C.post("/restaurants",e)}},{key:"update",value:function(e,t){return C.put("/restaurants/".concat(e),t)}},{key:"delete",value:function(e){return C.delete("/restaurants/".concat(e))}},{key:"findByCity",value:function(e){return C.get("/restaurants?city=".concat(e))}},{key:"getAllCities",value:function(){return C.get("/restaurants/city")}}]),e}()),w=(a(162),a(271),a(2)),S=(n.Component,function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({selectedOption:e.target.value},(function(){return console.log("Option selected: ",e)}))},n.onChangeSearchCity=n.onChangeSearchCity.bind(Object(j.a)(n)),n.retrieveRestaurants=n.retrieveRestaurants.bind(Object(j.a)(n)),n.refreshList=n.refreshList.bind(Object(j.a)(n)),n.setActiveRestaurant=n.setActiveRestaurant.bind(Object(j.a)(n)),n.searchCity=n.searchCity.bind(Object(j.a)(n)),n.retrieveCities=n.retrieveCities.bind(Object(j.a)(n)),n.handleChange=n.handleChange.bind(Object(j.a)(n)),n.state={user:localStorage.getItem("id"),restaurants:[],currentRestaurant:null,currentIndex:-1,searchCity:"",cities:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.retrieveRestaurants(),this.retrieveCities()}},{key:"onChangeSearchCity",value:function(e){var t=e.target.value;this.setState({searchCity:t})}},{key:"retrieveRestaurants",value:function(){var e=this;console.log("*&*&*&*&* ",this.state.user),k.getAll().then((function(t){e.setState({restaurants:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"refreshList",value:function(){this.retrieveRestaurants(),this.setState({currentRestaurant:null,currentIndex:-1})}},{key:"setActiveRestaurant",value:function(e,t){this.setState({currentRestaurant:e,currentIndex:t})}},{key:"searchCity",value:function(e){var t=this;k.findByCity(this.state.selectedOption).then((function(e){t.setState({restaurants:e.data,currentRestaurant:null}),console.log("search city",e.data)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"retrieveCities",value:function(){var e=this;k.getAllCities().then((function(t){e.setState({cities:t.data,selectedOption:t.data[0].city})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.restaurants,n=t.currentRestaurant,s=t.currentIndex;return Object(w.jsxs)("div",{className:"rowC",children:[Object(w.jsxs)("div",{className:"list row",children:[Object(w.jsx)("div",{className:"col-md-8",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:this.searchCity,children:[Object(w.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.selectedOption,onChange:this.handleChange,children:this.state.cities.map((function(e,t){return Object(w.jsx)("option",{value:e.city,children:e.city},t)}))}),Object(w.jsx)("input",{type:"submit",value:"Submit"})]})})}),Object(w.jsxs)("div",{className:"col-md-8",children:[Object(w.jsx)("h4",{children:"Restaurant List"}),Object(w.jsx)("ul",{className:"list-group",children:a&&a.map((function(t,a){return Object(w.jsx)("li",{className:"list-group-item "+(a===s?"active":""),onClick:function(){return e.setActiveRestaurant(t,a)},children:t.name},a)}))})]}),Object(w.jsx)("div",{className:"col=md-6",children:n?Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{children:"Restaurant"}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{children:Object(w.jsx)("strong",{children:"Name:"})})," ",n.name]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{children:Object(w.jsx)("strong",{children:"Website:"})})," ",Object(w.jsx)("a",{target:"_blank",href:n.website,children:n.website})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{children:Object(w.jsx)("strong",{children:"Address:"})})," ",n.address]}),Object(w.jsx)(i.b,{to:"/restaurants/"+n.id,className:"badge badge-light",children:"Edit"})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Please click on a Restaurant..."})]})})]}),Object(w.jsx)("img",{className:"bg",src:b,alt:"Food"})]})}}]),a}(n.Component)),N=a(68),R=a(234),_=a(69),A=_.a.div(x||(x=Object(N.a)(["\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    padding: 20px;\n    text-align:center;\n"]))),I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onPlaceChanged=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.map,a=e.addplace,s=n.autoComplete.getPlace();console.log("place ",s),console.log("contact ",s.website),s.geometry&&(s.geometry.viewport?t.fitBounds(s.geometry.viewport):(t.setCenter(s.geometry.location),t.setZoom(17)),a(s),n.searchInput.blur())},n.clearSearchBox=n.clearSearchBox.bind(Object(j.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.map,a=e.mapApi,n={fields:["name","url","website","address_components","geometry"],types:["establishment"]};this.autoComplete=new a.places.Autocomplete(this.searchInput,n),this.autoComplete.addListener("place_changed",this.onPlaceChanged),this.autoComplete.bindTo("bounds",t)}},{key:"componentWillUnmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.mapApi;t.event.clearInstanceListeners(this.searchInput)}},{key:"clearSearchBox",value:function(){this.searchInput.value=""}},{key:"render",value:function(){var e=this;return Object(w.jsx)(A,{children:Object(w.jsx)("input",{className:"search-input",ref:function(t){e.searchInput=t},type:"text",onFocus:this.clearSearchBox,placeholder:"Enter a location"})})}}]),a}(n.Component),W=_.a.div(y||(y=Object(N.a)(["\n    position: absolute;\n    width: 38px;\n    height: 37px;\n    background-image: url(https://icon-library.com/images/pin-icon-png/pin-icon-png-9.jpg);\n    background-size: contain;\n    background-repeat: no-repeat;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    cursor: grab;\n"]))),M=function(e){var t=e.text,a=e.onClick;return Object(w.jsx)(W,{alt:t,onClick:a})};M.defaultProps={onClick:null};var T,L=M,z=a(520),B=_.a.main(T||(T=Object(N.a)(["\n    width: 100%;\n    height: 100%;\n"]))),U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={mapApiLoaded:!1,mapInstance:null,mapApi:null,geoCoder:null,user:localStorage.getItem("id"),places:[],restaurant_name:"",website:"",center:[],zoom:9,address:"",city:"",state:"",draggable:!0,lat:null,lng:null,submitted:!1},n.onMarkerInteraction=function(e,t,a){n.setState({draggable:!1,lat:a.lat,lng:a.lng})},n.onMarkerInteractionMouseUp=function(e,t,a){n.setState({draggable:!0}),n._generateAddress()},n._onChange=function(e){var t=e.center,a=e.zoom;n.setState({center:t,zoom:a})},n._onClick=function(e){n.setState({lat:e.lat,lng:e.lng})},n.apiHasLoaded=function(e,t){n.setState({mapApiLoaded:!0,mapInstance:e,mapApi:t}),n._generateAddress()},n.addPlace=function(e){console.log("addPlace ",e),n.setState({places:[e],restaurant_name:e.name,website:e.website,lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}),n._generateAddress()},n.getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},n.saveRestaurant=n.saveRestaurant.bind(Object(j.a)(n)),n.newRestaurant=n.newRestaurant.bind(Object(j.a)(n)),n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.setState({center:[47.608013,-122.335167],lat:47.608013,lng:-122.335167})}},{key:"saveRestaurant",value:function(){var e=this,t={user:this.state.user,name:this.state.restaurant_name,website:this.state.website,address:this.state.address,city:this.state.city};console.log("potato ",t),k.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,website:t.data.website,address:t.data.address,city:t.data.city,user:e.state.user,submitted:!0}),console.log("saveRestaurant ",e.state.submitted),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newRestaurant",value:function(){this.setState({id:null,user:this.state.user,name:"",website:"",address:"",city:"",submitted:!1}),console.log("newRestaurant ",this.submitted)}},{key:"_generateAddress",value:function(){var e=this;(new this.state.mapApi.Geocoder).geocode({location:{lat:this.state.lat,lng:this.state.lng}},(function(t,a){if(console.log(t),console.log(a),"OK"===a)if(t[0]){e.zoom=12;var n=t[0].address_components,s=e.getCity(n),r=e.getState(n);e.setState({address:t[0].formatted_address,city:s,state:r})}else window.alert("No results found");else window.alert("Geocoder failed due to: "+a)}))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.places,t.mapApiLoaded),n=t.mapInstance,s=t.mapApi;return Object(w.jsxs)(B,{children:[a&&Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{children:"Restaurant Search"}),Object(w.jsx)(I,{className:"auto-complete",map:n,mapApi:s,addplace:this.addPlace})]}),Object(w.jsx)(R.a,{center:this.state.center,zoom:this.state.zoom,draggable:this.state.draggable,onChange:this._onChange,onChildMouseDown:this.onMarkerInteraction,onChildMouseUp:this.onMarkerInteractionMouseUp,onChildMouseMove:this.onMarkerInteraction,onChildClick:function(){return console.log("child click")},onClick:this._onClick,bootstrapURLKeys:{key:"".concat("AIzaSyBaOc-kpmUetfkxEQc60qXzA_p4FZvOmUY"),libraries:["places","geometry"]},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.apiHasLoaded(a,n)},children:Object(w.jsx)(L,{text:this.state.address,lat:this.state.lat,lng:this.state.lng})}),Object(w.jsx)("div",{className:"descriptions",children:Object(w.jsxs)(z.b,{bordered:!0,children:[Object(w.jsx)(z.b.Item,{label:"Restaurant",children:this.state.restaurant_name}),Object(w.jsx)("br",{}),Object(w.jsx)(z.b.Item,{label:"Address",children:this.state.address})]})}),Object(w.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{children:"You submitted successfully!"}),Object(w.jsx)("button",{className:"btn btn-success",onClick:this.newRestaurant,children:"Add"})]}):Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:this.saveRestaurant,className:"btn btn-success",children:"Submit"})})})]})}}]),a}(n.Component),D=(n.Component,a(29)),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(j.a)(n)),n.onChangeWebsite=n.onChangeWebsite.bind(Object(j.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(j.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(j.a)(n)),n.getRestaurant=n.getRestaurant.bind(Object(j.a)(n)),n.updateRestaurant=n.updateRestaurant.bind(Object(j.a)(n)),n.deleteRestaurant=n.deleteRestaurant.bind(Object(j.a)(n)),n.state={currentRestaurant:{id:null,name:"",website:"",address:"",city:""},message:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getRestaurant(this.props.match.params.id)}},{key:"onChangeName",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(D.a)(Object(D.a)({},e.currentRestaurant),{},{name:t})}}))}},{key:"onChangeWebsite",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(D.a)(Object(D.a)({},e.currentRestaurant),{},{website:t})}}))}},{key:"onChangeAddress",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(D.a)(Object(D.a)({},e.currentRestaurant),{},{address:t})}}))}},{key:"onChangeCity",value:function(e){var t=e.target.value;this.setState((function(e){return{currentRestaurant:Object(D.a)(Object(D.a)({},e.currentRestaurant),{},{city:t})}}))}},{key:"getRestaurant",value:function(e){var t=this;k.get(e).then((function(e){t.setState({currentRestaurant:e.data}),console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"updateRestaurant",value:function(){var e=this;k.update(this.state.currentRestaurant.id,this.state.currentRestaurant).then((function(t){console.log(t.data),e.setState({message:"The restaurant was update successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteRestaurant",value:function(){var e=this;k.delete(this.state.currentRestaurant.id).then((function(t){console.log(t.data),e.props.history.push("/restaurants")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.currentRestaurant;return Object(w.jsx)("div",{children:e?Object(w.jsxs)("div",{className:"edit-form",children:[Object(w.jsx)("h4",{children:"Restaurant"}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name"}),Object(w.jsx)("input",{type:"text",className:"form-control",id:"name",value:e.name,onChange:this.onChangeName})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"website",children:"Website"}),Object(w.jsx)("input",{type:"text",className:"formControl",id:"website",required:!0,value:e.website,onChange:this.onChangeWebsite,name:"website"})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"address",children:"Address"}),Object(w.jsx)("input",{type:"address",className:"formControl",id:"address",value:e.address,onChange:this.onChangeAddress})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"city",children:"City"}),Object(w.jsx)("input",{type:"text",className:"formControl",id:"city",required:!0,value:e.city,onChange:this.onChangeCity,name:"city"})]})]}),Object(w.jsx)("button",{type:"submit",className:"badge badge-success",onClick:this.updateRestaurant,children:"Update"}),Object(w.jsx)("button",{type:"submit",className:"badge badge=danger mr-2",onClick:this.deleteRestaurant,children:"Delete"}),Object(w.jsx)("p",{children:this.state.message})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Click on a Restaurant"})]})})}}]),a}(n.Component),F=a(40),q=a(72),E=a(112),J=a.n(E),G=a(231),K=a.n(G);J.a.setApiKey("AIzaSyBaOc-kpmUetfkxEQc60qXzA_p4FZvOmUY");n.Component;var Y=a(514),Z=a(515),H=a(482),Q=a(512),V=a(510),X=a(516),$=a(522),ee=Object(V.a)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1}}}));var te=function(){var e=ee();return Object(w.jsxs)(s.a.Fragment,{children:[Object(w.jsx)(Q.a,{}),Object(w.jsx)(Y.a,{position:"static",color:"default",elevation:0,className:e.appBar,children:Object(w.jsxs)(Z.a,{className:e.toolbar,children:[Object(w.jsx)(H.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle,children:Object(w.jsx)(X.a,{component:i.c,to:"/",underline:"none",color:"textPrimary",children:"WhatsToEat"})}),Object(w.jsx)("nav",{children:Object(w.jsx)(X.a,{color:"textPrimary",href:"#",className:e.link,component:i.c,to:"/register",children:"Register"})}),Object(w.jsx)($.a,{href:"#",color:"primary",variant:"outlined",className:e.link,component:i.c,to:"/login",children:"Login"}),Object(w.jsx)($.a,{href:"#",color:"primary",variant:"outlined",className:e.link,component:i.c,to:"/logout",children:"Logout"})]})})]})},ae=a(517);a(521),Object(V.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},footer:Object(F.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));var ne=a(109),se=a(523),re=a(519),ce=a(518),ie=Object(V.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function oe(){var e=Object(h.f)(),t=Object.freeze({email:"",user_name:"",password:""}),a=Object(n.useState)(t),s=Object(ne.a)(a,2),r=s[0],c=s[1],i=function(e){c(Object(D.a)(Object(D.a)({},r),{},Object(F.a)({},e.target.name,e.target.value.trim())))},o=ie();return Object(w.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(w.jsx)(Q.a,{}),Object(w.jsxs)("div",{className:o.paper,children:[Object(w.jsx)(se.a,{className:o.avatar}),Object(w.jsx)(H.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(w.jsxs)("form",{className:o.form,noValidate:!0,children:[Object(w.jsxs)(ce.a,{container:!0,spacing:2,children:[Object(w.jsx)(ce.a,{item:!0,xs:12,children:Object(w.jsx)(re.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:i})}),Object(w.jsx)(ce.a,{item:!0,xs:12,children:Object(w.jsx)(re.a,{variant:"outlined",required:!0,fullWidth:!0,id:"user_name",label:"Username",name:"user_name",autoComplete:"user_name",onChange:i})}),Object(w.jsx)(ce.a,{item:!0,xs:12,children:Object(w.jsx)(re.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:i})})]}),Object(w.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(t){t.preventDefault(),console.log(r),C.post("/api/user/register/",{email:r.email,user_name:r.user_name,password:r.password}).then((function(t){e.push("/login"),console.log(t),console.log(t.data)}))},children:"Sign Up"}),Object(w.jsx)(ce.a,{container:!0,justify:"flex-end",children:Object(w.jsx)(ce.a,{item:!0,children:Object(w.jsx)(X.a,{href:"#",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})}var le=Object(V.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ue(){var e=Object(h.f)(),t=Object.freeze({user_name:"",password:""}),a=Object(n.useState)(t),s=Object(ne.a)(a,2),r=s[0],c=s[1],i=function(e){c(Object(D.a)(Object(D.a)({},r),{},Object(F.a)({},e.target.name,e.target.value.trim())))},o=le();return localStorage.getItem("access_token")&&e.push("/homepage"),Object(w.jsx)(ae.a,{children:Object(w.jsx)("div",{className:"app",children:Object(w.jsxs)("div",{className:"card-login",children:[Object(w.jsx)(se.a,{className:o.avatar}),Object(w.jsx)(H.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(w.jsxs)("form",{className:o.form,noValidate:!0,children:[Object(w.jsx)(re.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"user_name",label:"User Name",name:"user_name",autoComplete:"user_name",autoFocus:!0,onChange:i}),Object(w.jsx)(re.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:i}),Object(w.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(t){t.preventDefault(),C.post("/api/token/",{user_name:r.user_name,password:r.password}).then((function(t){localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),localStorage.setItem("id",t.data.id),localStorage.setItem("user_name",t.data.user_name),C.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),e.push("/"),console.log(t.data)}))},children:"Sign In"}),Object(w.jsxs)(ce.a,{container:!0,children:[Object(w.jsx)(ce.a,{item:!0,xs:!0,children:Object(w.jsx)(X.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(w.jsx)(ce.a,{item:!0,children:Object(w.jsx)(X.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})})}function de(){var e=Object(h.f)();return Object(n.useEffect)((function(){C.post("/api/user/logout/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),C.defaults.headers.Authorization=null,e.push("/login")})),Object(w.jsx)("div",{children:"Logout"})}var he=Object(V.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),be=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({selectedOption:e.target.value},(function(){return console.log("Option selected: ",e)}))},n.onChangeSearchCity=n.onChangeSearchCity.bind(Object(j.a)(n)),n.retrieveRestaurants=n.retrieveRestaurants.bind(Object(j.a)(n)),n.searchCity=n.searchCity.bind(Object(j.a)(n)),n.retrieveCities=n.retrieveCities.bind(Object(j.a)(n)),n.handleChange=n.handleChange.bind(Object(j.a)(n)),n.state={user:localStorage.getItem("id"),restaurants:[],currentRestaurant:null,currentIndex:-1,searchCity:"",cities:[],random_restaurant:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.retrieveCities()}},{key:"onChangeSearchCity",value:function(e){var t=e.target.value;this.setState({searchCity:t})}},{key:"retrieveRestaurants",value:function(){var e=this;console.log("*&*&*&*&* ",this.state.user),k.getAll().then((function(t){e.setState({restaurants:t.data,random_restaurant:t.data[Math.floor(Math.random()*t.data.length)]}),console.log(t.data),console.log("random restaurant ",t.data[Math.floor(Math.random()*t.data.length)])})).catch((function(e){console.log(e)}))}},{key:"searchCity",value:function(e){var t=this;k.findByCity(this.state.selectedOption).then((function(e){t.setState({restaurants:e.data,currentRestaurant:null,random_restaurant:e.data[Math.floor(Math.random()*e.data.length)]}),console.log("search city",e.data)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"retrieveCities",value:function(){var e=this;k.getAllCities().then((function(t){e.setState({cities:t.data,selectedOption:t.data[0].city})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(w.jsx)("div",{className:"app",children:Object(w.jsxs)("div",{className:"card",children:[Object(w.jsx)("h1",{className:"heading",children:this.state.random_restaurant.name}),Object(w.jsxs)("div",{className:"col-md-8",children:[Object(w.jsx)($.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:he.submit,onClick:this.retrieveRestaurants,children:"Surprise Me"}),Object(w.jsx)("h5",{children:"Surprise by Location"}),Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:this.searchCity,children:[Object(w.jsx)("select",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",value:this.state.selectedOption,onChange:this.handleChange,children:this.state.cities.map((function(e,t){return Object(w.jsx)("option",{value:e.city,children:e.city},t)}))}),Object(w.jsx)("input",{type:"submit",value:"Submit"})]})})]})]})})}}]),a}(n.Component),je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(te,{}),Object(w.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark justify-content-between",children:[Object(w.jsxs)("div",{className:"navbar-collapse collapse dual-collapse2",children:[Object(w.jsx)("a",{href:"/login",className:"navbar-brand",children:"WhatsToEat"}),Object(w.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(i.b,{to:"/restaurants",className:"nav-link",children:"Restaurants"})}),Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(i.b,{to:"/add",className:"nav-link",children:"Add Restaurant"})})]})]}),Object(w.jsx)("div",{className:"navbar-collapse collapse dual-collapse2",children:Object(w.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(i.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(i.b,{to:"/logout",className:"nav-link",children:"Logout"})})]})})]}),Object(w.jsx)("div",{className:"container mt-3",children:Object(w.jsxs)(h.c,{children:[Object(w.jsx)(h.a,{path:"/register",component:oe}),Object(w.jsx)(h.a,{path:"/login/",component:ue}),Object(w.jsx)(h.a,{path:"/logout",component:de}),Object(w.jsx)(h.a,{exact:!0,path:"/",component:be}),Object(w.jsx)(h.a,{exact:!0,path:"/restaurants",component:S}),Object(w.jsx)(h.a,{path:"/restaurants/:id",component:P}),Object(w.jsx)("div",{className:"main-wrapper",children:Object(w.jsx)(h.a,{exact:!0,path:"/add",component:U})})]})})]})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(478);c.a.render(Object(w.jsx)(i.a,{children:Object(w.jsx)(je,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[479,1,2]]]);
//# sourceMappingURL=main.7654ff84.chunk.js.map